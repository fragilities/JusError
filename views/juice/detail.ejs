<%- include('../partials/head') %>
<!-- <script src="../../node_modules/chart.js/dist/Chart.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

<main>
  <div class="container detail-container">
    <h2><%=juice.name%></h2>
    <h3>Nutritional Value</h3>
    <div id="nutrition">
      <div id="nutritionCanvas">

        <canvas id="nutritionChart" width="100px" height="100px"></canvas>
      </div>
      <div id="nutritionData">
        <span>Calorie: <%= nutrition.calorie %></span>
        <span>Carbohydrates: <%= nutrition.carbohydrates %></span>
        <span>Protein: <%= nutrition.protein %></span>
        <span>Fat: <%= nutrition.fat %></span>
      </div>
    </div>
  </div>
</main>

<input type="hidden" id="calorie" value="<%=nutrition.calorie%>">
<input type="hidden" id="carbohydrates" value="<%=nutrition.carbohydrates%>">
<input type="hidden" id="protein" value="<%=nutrition.protein%>">
<input type="hidden" id="fat" value="<%=nutrition.fat%>">

<script>
const ctx = document.getElementById('nutritionChart').getContext('2d');

let chartData = []
chartData.push(document.getElementById('carbohydrates').value)
chartData.push(document.getElementById('protein').value)
chartData.push(document.getElementById('fat').value)

console.log(chartData)


let myChart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ['Carbohydrates', 'Protein', 'Fat'],
    datasets: [{
      label: '',
      data: chartData,
      backgroundColor: [
        'rgba(255, 99, 132, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)'
      ],
      borderColor: [
        'rgba(255, 99, 132, 1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)'
      ],
      borderWidth: 1
    }]
  },
  options: {
    scales: {
      yAxes: [{
        ticks: {
          beginAtZero: true
        }
      }]
    }
  }
})
</script>
<%- include('../partials/foot') %>